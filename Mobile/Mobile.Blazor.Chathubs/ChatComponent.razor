@inherits ChatBase

<ContentView>
    <StackLayout Margin="new Thickness(20)">

        <Label Text="Chat Component!" FontSize="40" />

        <GuestLogin @ref="GuestLoginReference" ChatComponentReference="@this"></GuestLogin>

        <Frame BorderColor="Color.LightBlue" CornerRadius="2" Margin="5" Padding="10">
            <ScrollView>
                <StackLayout>

                    @if (ChatHubService.Rooms == null || !ChatHubService.Rooms.Any())
                    {
                        <StackLayout Orientation="StackOrientation.Horizontal">
                            <Label Text="Waiting for you..." VerticalOptions="LayoutOptions.CenterAndExpand" />
                            <ActivityIndicator Color="Color.Purple" IsRunning="true" />
                        </StackLayout>
                    }
                    else
                    {
                        foreach (var item in ChatHubService.Rooms)
                        {
                            <RoomItem Item="item" />
                        }
                    }

                </StackLayout>
            </ScrollView>
        </Frame>

        <Frame BorderColor="Color.LightBlue" CornerRadius="2" Margin="5" Padding="10">
            <ScrollView>
                <StackLayout>

                    @if (ChatHubService.Lobbies == null || !ChatHubService.Lobbies.Any())
                    {
                        <StackLayout Orientation="StackOrientation.Horizontal">
                            <Label Text="Loading..." VerticalOptions="LayoutOptions.CenterAndExpand" />
                            <ActivityIndicator Color="Color.Purple" IsRunning="true" />
                        </StackLayout>
                    }
                    else
                    {
                        foreach (var item in ChatHubService.Lobbies)
                        {
                            <LobbyItem Item="item" />
                        }
                    }

                </StackLayout>
            </ScrollView>
        </Frame>

    </StackLayout>

    <ExceptionModal @ref="ExceptionModalReference" Message="@ExceptionMessage"></ExceptionModal>

</ContentView>

@code {

}
